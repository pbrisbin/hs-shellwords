#!/usr/bin/env bash
set -euo pipefail

version=$1

if [[ "$version" =~ ^[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
  echo "$version"
  exit 0
fi

if [[ "$version" =~ ^([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)-rc.*$ ]]; then
  echo "${BASH_REMATCH[1]}"
  exit 0
fi

echo "Invalid version $version" >&2
exit 1
